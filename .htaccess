# Basic security and performance settings
RewriteEngine On

# Security headers
Header always set X-Content-Type-Options nosniff
Header always set X-Frame-Options SAMEORIGIN
Header always set X-XSS-Protection "1; mode=block"

# Force HTTPS (only if not already handled by cPanel)
RewriteCond %{HTTPS} off
RewriteCond %{HTTP:X-Forwarded-SSL} !on
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Optional: Force non-www version (only if needed)
# RewriteCond %{HTTP_HOST} ^www\.sof-car\.eu$ [NC]
# RewriteRule ^(.*)$ https://sof-car.eu/$1 [R=301,L]

# Next.js SPA routing - redirect all requests to index.html except for static files
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.html [L]